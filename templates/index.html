<!DOCTYPE html>
<html>
<head>
    <title>Vern Facebook Share UI</title>
    <style>
        body { font-family: Arial, sans-serif; background: #222; color: #eee; }
        .container { max-width: 500px; margin: 40px auto; background: #333; padding: 30px; border-radius: 12px; box-shadow: 0 0 20px #111;}
        h1 { text-align: center; color: #6cf; }
        .status { margin: 10px 0; padding: 10px; background: #444; border-radius: 8px; }
        .success { color: #3fa43f; }
        .error { color: #de4f4f; }
        label { display: block; margin-top: 15px; }
        input[type=text], input[type=number] { width: 100%; padding: 8px; margin-top: 5px; border-radius: 5px; border: none; background: #222; color: #eee; }
        button { margin-top: 16px; background: #6cf; color: #222; border: none; padding: 10px 18px; border-radius: 7px; cursor: pointer;}
        button:disabled { background: #555; color: #ccc; }
        .footer { text-align: center; color: #999; margin-top: 20px; font-size: 13px;}
        a { color: #6cf; text-decoration: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🌀 Vern Facebook Share</h1>
        <div id="login-section">
            <label>🔐 Facebook Cookie:</label>
            <input type="text" id="cookie" placeholder="Paste your Facebook cookie here">
            <button onclick="login()">Login</button>
            <div id="login-status" class="status"></div>
        </div>
        <div id="share-section" style="display:none;">
            <label>🔗 Facebook Post Link:</label>
            <input type="text" id="post_link" placeholder="https://facebook.com/...">
            <label>🔁 Share Count:</label>
            <input type="number" id="share_count" min="1" value="1">
            <button onclick="share()">Start Share</button>
            <div id="share-status" class="status"></div>
            <div id="progress"></div>
        </div>
        <div class="footer">
            🧑 Author: vrax |
            🌐 <a href="https://github.com/vraxyxx" target="_blank">GitHub</a> |
            📘 <a href="https://facebook.com/vern.23x" target="_blank">Facebook</a>
        </div>
    </div>
<script>
function login() {
    document.getElementById('login-status').innerHTML = '';
    var cookie = document.getElementById('cookie').value;
    fetch('/login', {method: 'POST', headers: {'Content-Type':'application/x-www-form-urlencoded'}, body: 'cookie=' + encodeURIComponent(cookie)})
    .then(res => res.json())
    .then(data => {
        if(data.success) {
            document.getElementById('login-status').innerHTML = '<span class="success">✅ Login successful!</span>';
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('share-section').style.display = '';
        } else {
            document.getElementById('login-status').innerHTML = '<span class="error">❌ ' + (data.error || 'Login failed.') + '</span>';
        }
    });
}
function share() {
    document.getElementById('share-status').innerHTML = '';
    document.getElementById('progress').innerHTML = '';
    var post_link = document.getElementById('post_link').value;
    var share_count = document.getElementById('share_count').value;
    fetch('/share', {method: 'POST', headers: {'Content-Type':'application/x-www-form-urlencoded'}, body: 'post_link=' + encodeURIComponent(post_link) + '&share_count=' + encodeURIComponent(share_count)})
    .then(res => res.json())
    .then(data => {
        if(data.success) {
            document.getElementById('share-status').innerHTML = '<span class="success">⏳ Started!</span>';
            var progress = '';
            var ok = 0;
            for(var i=0;i<data.results.length;i++) {
                if(data.results[i].status=='success') { ok++; progress += '➤ Sharing: ' + data.results[i].n + '<br>'; }
                else progress += '<span class="error">❌ Error occurred at ' + data.results[i].n + '</span><br>';
            }
            document.getElementById('progress').innerHTML = progress + '<br><span class="success">✅ Done sharing ' + ok + '/' + share_count + ' posts in ' + data.elapsed + '</span>';
        } else {
            document.getElementById('share-status').innerHTML = '<span class="error">❌ ' + (data.error || 'Share failed.') + '</span>';
        }
    });
}
</script>
</body>
</html>